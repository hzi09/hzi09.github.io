---
title:  "[LeetCode][MySQL] 1407. Top Travellers" 

categories: 
    - MySQL_LeetCode
tags: 
    - LeetCode
    - MySQL

toc: True
toc_sticky: True
---
![Image](https://github.com/user-attachments/assets/4b8e7f3a-d568-4d5b-a8a9-c3d4b23975f6){: .align-center style="width:50%;"}

**Easy**
[ğŸ”—1407. Top Travellers](https://leetcode.com/problems/top-travellers/description/)

# ğŸ“ë¬¸ì œ ìš”ì•½
Table:Â `Users`

```
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| id            | int     |
| name          | varchar |
+---------------+---------+
id is the column with unique values for this table.
name is the name of the user.

```

Table:Â `Rides`

```
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| id            | int     |
| user_id       | int     |
| distance      | int     |
+---------------+---------+
id is the column with unique values for this table.
user_id is the id of the user who traveled the distance "distance".

```

Write a solutionÂ to report the distance traveled by each user.

Return the result table ordered byÂ `travelled_distance`Â inÂ **descending order**, if two or more users traveled the same distance, order them by theirÂ `name`Â inÂ **ascending order**.

TheÂ result format is in the following example.

**Example 1:**

```
Input:
Users table:
+------+-----------+
| id   | name      |
+------+-----------+
| 1    | Alice     |
| 2    | Bob       |
| 3    | Alex      |
| 4    | Donald    |
| 7    | Lee       |
| 13   | Jonathan  |
| 19   | Elvis     |
+------+-----------+
Rides table:
+------+----------+----------+
| id   | user_id  | distance |
+------+----------+----------+
| 1    | 1        | 120      |
| 2    | 2        | 317      |
| 3    | 3        | 222      |
| 4    | 7        | 100      |
| 5    | 13       | 312      |
| 6    | 19       | 50       |
| 7    | 7        | 120      |
| 8    | 19       | 400      |
| 9    | 7        | 230      |
+------+----------+----------+
Output:
+----------+--------------------+
| name     | travelled_distance |
+----------+--------------------+
| Elvis    | 450                |
| Lee      | 450                |
| Bob      | 317                |
| Jonathan | 312                |
| Alex     | 222                |
| Alice    | 120                |
| Donald   | 0                  |
+----------+--------------------+
Explanation:
Elvis and Lee traveled 450 miles, Elvis is the top traveler as his name is alphabetically smaller than Lee.
Bob, Jonathan, Alex, and Alice have only one ride and we just order them by the total distances of the ride.
Donald did not have any rides, the distance traveled by him is 0.
```


<br>

# âœï¸ë¬¸ì œ í’€ì´
## SELECT

```sql
SELECT u.name, IFNULL(SUM(r.distance), 0) AS travelled_distance
```

- `name` : ì‚¬ìš©ì ì´ë¦„
- `travelled_distance` : ì´ ì´ë™ê±°ë¦¬
    - ì¼ë‹¨ ê° ì‚¬ìš©ìë³„ ì´ ì´ë™ê±°ë¦¬ë¥¼  `SUM(r.distance)`ë¡œ êµ¬í•¨
    - ì´ë™í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ê²½ìš° ì´ë™ê±°ë¦¬ê°€ null ê°’ì´ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— `IFNULL`ì„ ì‚¬ìš©í•˜ì—¬ null ê°’ì„ 0ìœ¼ë¡œ ëŒ€ì²´

## FROM

```sql
FROM Users u
    LEFT JOIN Rides r
        ON u.id = r.user_id
```

- ì´ë™í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì˜ ê²½ìš°ì—ë„ ë°ì´í„°ëŠ” ìˆì–´ì•¼ í•˜ë¯€ë¡œ `LEFT JOIN` ì„ ì‚¬ìš©í•˜ì—¬ ì´ë™ ê±°ë¦¬ê°€ ì—†ë‹¤ë©´ NULLë¡œ ë‚˜ì˜¬ ìˆ˜ ìˆê²Œ í•¨
- `Users` í…Œì´ë¸”ì˜ `id`ì™€ `Rides` í…Œì´ë¸”ì˜ `user_id`ê°€ ì™¸ë˜í‚¤

## GROUP BY

```sql
GROUP BY u.id
```

- ì²˜ìŒì— `name` ìœ¼ë¡œ ê·¸ë£¹í™”ë¥¼ í–ˆëŠ”ë°, ì´ëŸ´ê²½ìš° ë™ëª…ì´ì¸ì´ ìˆëŠ” ì¼€ì´ìŠ¤ì— í‹€ë¦¬ê²Œ ë¨
- ê·¸ëŸ¬ë¯€ë¡œ ì‚¬ìš©ìì˜ ê³ ìœ í•œ `id`ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹í™”

## ORDER BY

```sql
ORDER BY travelled_distance DESC, name
```

- `travelled_distance` ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•˜ê³ 
- `travelled_distance`ì˜ ê°’ì´ ê°™ì„ ê²½ìš°ì—ëŠ” `name`ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬

<br>

# ğŸ’¯ì œì¶œ ì½”ë“œ
```sql
SELECT u.name, IFNULL(SUM(r.distance), 0) AS travelled_distance
FROM Users u
    LEFT JOIN Rides r
        ON u.id = r.user_id
GROUP BY u.id
ORDER BY travelled_distance DESC, name
```