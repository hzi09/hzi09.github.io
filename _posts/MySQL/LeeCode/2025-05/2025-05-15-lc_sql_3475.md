---
title:  "[LeetCode][MySQL] 3475. DNA Pattern Recognition" 

categories: 
    - MySQL_LeetCode
tags: 
    - LeetCode
    - MySQL

toc: True
toc_sticky: True
---
![Image](https://github.com/user-attachments/assets/4b8e7f3a-d568-4d5b-a8a9-c3d4b23975f6){: .align-center style="width:50%;"}

**Easy**
[ğŸ”—3475. DNA Pattern Recognition](https://leetcode.com/problems/dna-pattern-recognition/)

# ğŸ“ë¬¸ì œ ìš”ì•½
Table:Â `Samples`

```
+----------------+---------+
| Column Name    | Type    |
+----------------+---------+
| sample_id      | int     |
| dna_sequence   | varchar |
| species        | varchar |
+----------------+---------+
sample_id is the unique key for this table.
Each row contains a DNA sequence represented as a string of characters (A, T, G, C) and the species it was collected from.

```

Biologists are studying basic patterns in DNA sequences. Write a solution to identifyÂ `sample_id`Â with the following patterns:

- Sequences thatÂ **start**Â withÂ **ATG**Â (a commonÂ **start codon**)
- Sequences thatÂ **end**Â with eitherÂ **TAA**,Â **TAG**, orÂ **TGA**Â (**stop codons**)
- Sequences containing the motifÂ **ATAT**Â (a simple repeated pattern)
- Sequences that haveÂ **at least**Â `3`Â **consecutive**Â **G**Â (likeÂ **GGG**Â orÂ **GGGG**)

ReturnÂ *the result table ordered byÂ sample_id inÂ **ascending**Â order*.

The result format is in the following example.

**Example:**

**Input:**

Samples table:

```
+-----------+------------------+-----------+
| sample_id | dna_sequence     | species   |
+-----------+------------------+-----------+
| 1         | ATGCTAGCTAGCTAA  | Human     |
| 2         | GGGTCAATCATC     | Human     |
| 3         | ATATATCGTAGCTA   | Human     |
| 4         | ATGGGGTCATCATAA  | Mouse     |
| 5         | TCAGTCAGTCAG     | Mouse     |
| 6         | ATATCGCGCTAG     | Zebrafish |
| 7         | CGTATGCGTCGTA    | Zebrafish |
+-----------+------------------+-----------+

```

**Output:**

```
+-----------+------------------+-------------+-------------+------------+------------+------------+
| sample_id | dna_sequence     | species     | has_start   | has_stop   | has_atat   | has_ggg    |
+-----------+------------------+-------------+-------------+------------+------------+------------+
| 1         | ATGCTAGCTAGCTAA  | Human       | 1           | 1          | 0          | 0          |
| 2         | GGGTCAATCATC     | Human       | 0           | 0          | 0          | 1          |
| 3         | ATATATCGTAGCTA   | Human       | 0           | 0          | 1          | 0          |
| 4         | ATGGGGTCATCATAA  | Mouse       | 1           | 1          | 0          | 1          |
| 5         | TCAGTCAGTCAG     | Mouse       | 0           | 0          | 0          | 0          |
| 6         | ATATCGCGCTAG     | Zebrafish   | 0           | 1          | 1          | 0          |
| 7         | CGTATGCGTCGTA    | Zebrafish   | 0           | 0          | 0          | 0          |
+-----------+------------------+-------------+-------------+------------+------------+------------+

```

**Explanation:**

- Sample 1 (ATGCTAGCTAGCTAA):
    - Starts with ATGÂ (has_start = 1)
    - Ends with TAAÂ (has_stop = 1)
    - Does not contain ATATÂ (has_atat = 0)
    - Does not contain at least 3 consecutive 'G's (has_ggg = 0)
- Sample 2 (GGGTCAATCATC):
    - Does not start with ATGÂ (has_start = 0)
    - Does not end with TAA, TAG, or TGAÂ (has_stop = 0)
    - Does not contain ATATÂ (has_atat = 0)
    - Contains GGGÂ (has_ggg = 1)
- Sample 3 (ATATATCGTAGCTA):
    - Does not start with ATGÂ (has_start = 0)
    - Does not end with TAA, TAG, or TGAÂ (has_stop = 0)
    - Contains ATATÂ (has_atat = 1)
    - Does not contain at least 3 consecutive 'G's (has_ggg = 0)
- Sample 4 (ATGGGGTCATCATAA):
    - Starts with ATGÂ (has_start = 1)
    - Ends with TAAÂ (has_stop = 1)
    - Does not contain ATATÂ (has_atat = 0)
    - Contains GGGGÂ (has_ggg = 1)
- Sample 5 (TCAGTCAGTCAG):
    - Does not match any patterns (all fields = 0)
- Sample 6 (ATATCGCGCTAG):
    - Does not start with ATGÂ (has_start = 0)
    - Ends with TAGÂ (has_stop = 1)
    - Starts with ATATÂ (has_atat = 1)
    - Does not contain at least 3 consecutive 'G's (has_ggg = 0)
- Sample 7 (CGTATGCGTCGTA):
    - Does not start with ATGÂ (has_start = 0)
    - Does not end with TAA, "TAG", or "TGA" (has_stop = 0)
    - Does not contain ATATÂ (has_atat = 0)
    - Does not contain at least 3 consecutive 'G's (has_ggg = 0)

**Note:**

- The result is ordered by sample_id in ascending order
- For each pattern, 1 indicates the pattern is present and 0 indicates it is not present


<br>

# âœï¸ë¬¸ì œ í’€ì´
## SELECT

```sql
SELECT sample_id, dna_sequence, species,
    CASE WHEN dna_sequence LIKE 'ATG%' THEN 1 ELSE 0 END AS has_start,
    CASE WHEN dna_sequence REGEXP 'TAA$|TAG$|TGA$' THEN 1 ELSE 0 END AS has_stop,
    CASE WHEN dna_sequence LIKE '%ATAT%' THEN 1 ELSE 0 END AS has_atat,
    CASE WHEN dna_sequence REGEXP 'GGG+' THEN 1 ELSE 0 END AS has_ggg
```

- `sample_id` : ìƒ˜í”Œ ID
- `dna_sequence` : DNA ì‹œí€€ìŠ¤
- `species` : ì¢…
- `has_start`
    - `dna_sequence LIKE 'ATG%' THEN 1` : `dna_sequence`ê°€ ATGë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°ëŠ” 1
    - `ELSE 0` : ì•„ë‹Œ ê²½ìš°ì—ëŠ” 0
- `has_stop`
    - `dna_sequence REGEXP 'TAA$|TAG$|TGA$' THEN 1` : ì •ê·œ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ `dna_sequence`ê°€ TAA, TAG ë˜ëŠ” TGAë¡œ ëë‚˜ëŠ” ê²½ìš°ëŠ” 1
    - `ELSE 0` : ì•„ë‹Œ ê²½ìš°ì—ëŠ” 0
- `has_atat`
    - `dna_sequence LIKE '%ATAT%' THEN 1` : `dna_sequence`ì— ATATê°€ í¬í•¨ë˜ëŠ” ê²½ìš°ëŠ” 1
    - `ELSE 0` : ì•„ë‹Œ ê²½ìš°ì—ëŠ” 0
- `has_ggg`
    - `dna_sequence REGEXP 'GGG+' THEN 1` : ì •ê·œ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ `dna_sequence`ê°€ ì—°ì†ì ìœ¼ë¡œ 3ê°œ ì´ìƒì˜ Gë¥¼ ê°–ëŠ” ê²½ìš°ì—ëŠ” 1
    - `ELSE 0` : ì•„ë‹Œ ê²½ìš°ì—ëŠ” 0

## FROM

```sql
FROM Samples
```

- `Samples` í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´

## ORDER BY

```sql
ORDER BY sample_id
```

- `sample_id`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬

<br>

# ğŸ’¯ì œì¶œ ì½”ë“œ
```sql
SELECT sample_id, dna_sequence, species,
    CASE WHEN dna_sequence LIKE 'ATG%' THEN 1 ELSE 0 END AS has_start,
    CASE WHEN dna_sequence REGEXP 'TAA$|TAG$|TGA$' THEN 1 ELSE 0 END AS has_stop,
    CASE WHEN dna_sequence LIKE '%ATAT%' THEN 1 ELSE 0 END AS has_atat,
    CASE WHEN dna_sequence REGEXP 'GGG+' THEN 1 ELSE 0 END AS has_ggg
FROM Samples
ORDER BY sample_id
```