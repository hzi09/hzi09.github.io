---
title:  "[TIL] ë‚´ì¼ë°°ì›€ìº í”„ 59ì¼ì°¨_[Djangp] Djangoì— ChatGPT ì—°ê²°" 

categories: 
    - TIL
tags: 
    - TIL
    - ë‚´ì¼ë°°ì›€ìº í”„
    - Django
    - ChatGPT
    - OpenAPI


toc: True
toc_sticky: True
---

![TIL](/assets/images/TIL2.png){: .align-center style="width:35%;"}

# ğŸ‘€Today I Learn
## êµ¬í˜„í•˜ê¸°
- urls.py
  - ê°€ì¥ ë¨¼ì € urlì„ êµ¬í˜„
  -  /chatbot/ ë§í¬ì—ì„œ ì—ì„œ ë°”ë¡œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŒ!

    ```python
    from django.urls import path
    from . import views

    app_name = 'chatbot'
    urlpatterns = [
        path('', views.py_tutor, name='py_tutor'),
    ]
    ```

- models.py
  - ëª¨ë¸ì€ ìœ ì €ì˜ ì§ˆë¬¸ê³¼ ì±—ë´‡ì˜ ë‹µë³€ë§Œ ì„¤ì •í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€ë§Œ ë§¤ì¹­ë˜ë„ë¡ êµ¬í˜„

    ```python
    from django.db import models

    class Chatbot(models.Model) :
        user_message = models.TextField()
        gpt_message = models.TextField()
    ```


- bot.py
  - ë‚´ ì§ˆë¬¸ì— ë‹µë³€ì„ í•´ì¤„ ì±—ë´‡ ì„¤ì •

    ```python
    import openai
    from dotenv import load_dotenv
    import os

    # .env íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
    load_dotenv()

    # API Key ì„¤ì •
    openai.api_key = os.getenv("OPENAI_API_KEY")

    def gpt(message) :
        prompt = """
        ë„ˆëŠ” íŒŒì´ì¬ í•¨ìˆ˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ì„œí¬í„°ì•¼.
        ë‚´ê°€ íŒŒì´ì¬ í•¨ìˆ˜ë¥¼ ì…ë ¥í•˜ë©´, í•¨ìˆ˜ì˜ ì—­í• ê³¼ ì‚¬ìš©ë°©ë²•ì— ëŒ€í•´ ì•Œë ¤ì£¼ê³  ê°„ë‹¨í•œ ì˜ˆì‹œë„ ì•Œë ¤ì¤˜.
        """
        response = openai.ChatCompletion.create(
            model="gpt-3.5-turbo",
            messages=[
                {
                    "role": "system", 
                    "content":prompt,
                },
                {
                    "role": "user",
                    "content":message,
                }
            ]
        )
        return response['choices'][0]['message']['content']
    ```
- view.py
  - ì´ ë¶€ë¶„ì—ì„œ ê³ ë¯¼ì„ ë§ì´ í–ˆëŠ”ë°, ë‹µë³€ì´ë‘ ì§ˆë¬¸ì´ ê°™ì´ ë³´ì´ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ íˆìŠ¤í† ë¦¬ í˜•ì‹ìœ¼ë¡œ 10ê°œë§Œ ë³´ì´ë„ë¡ ì…‹íŒ…í•¨!

    ```python
    from django.shortcuts import render, redirect
    from .models import Chatbot 
    from .bot import gpt


    def py_tutor(request) :
        if request.method == 'POST' :
            user_message = request.POST.get('user_message')
            if user_message :
                bot_response = gpt(user_message)
                Chatbot.objects.create(user_message=user_message, gpt_message=bot_response)
                chat_history = Chatbot.objects.all().order_by('-pk')[:10]
                context ={
                    "chat_history" : chat_history,
                }
                return render(request, 'chatbot/chatbot.html', context)
        return render(request, 'chatbot/chatbot.html')
    ```

- chatbot.html
  - htmlì€ ì•„ì§ë„ ì¢€ ì–´ë ¤ì›Œì„œ ê°„ë‹¨í•˜ê²Œ ì•„ëŠ” ê²ƒë“¤ë§Œ ì‚¬ìš©í•´ì„œ êµ¬í˜„(ChatGPTê°€ ì‚´ì§ ë„ì™€ì¤¬ë‹¤.)

<div style="margin-left: 5em;">
{% highlight html %}
{% raw %}

{% extends "base.html" %}

{% block content %}
    <h1>ğŸ¤–hello! I'm Python Tutor</h1>
    <h2>ëª¨ë¥´ëŠ” íŒŒì´ì¬ í•¨ìˆ˜ê°€ ìˆë‹¤ë©´ ê²€ìƒ‰í•´ë³´ì„¸ìš”!</h2>
    <form method="POST">
        {% csrf_token %}
        <textarea name="user_message" rows="4" cols="50" placeholder="Ask me anything..."></textarea>
        <button type="submit">ì§ˆë¬¸í•˜ê¸°</button>
    </form>


        <ul class="history">
            {% for chat in chat_history %}
                <li class="history-item">
                    <p class="user-message"> ì§ˆë¬¸ : {{ chat.user_message }}</p>
                    <pre class="bot-response"> ë‹µë³€ {{ chat.gpt_message }}</pre>
                </li>
            {% endfor %}


{% endblock content %}

{% endraw %}
{% endhighlight %}
</div>

<br>

## ì—ëŸ¬ í•´ê²°í•˜ê¸°
### APIRemovedINV1
- runserverë¥¼ í•˜ê³  ì²˜ìŒ ì§ˆë¬¸ì„ í•˜ë‹ˆê¹Œ ëœ¨ëŠ” ì˜¤ë¥˜..!

    ![Image](https://github.com/user-attachments/assets/0dca63be-5e3b-41a7-9826-d1492606760b)

- OpenAIì˜ ChatCompletion APIê°€ ì´ì „ ë²„ì „ì—ì„œ ì œê±°ë˜ì—ˆê±°ë‚˜ ë” ì´ìƒ ì§€ì›ë˜ì§€ ì•ŠìŒ!

- ğŸ’ªí•´ê²°í•˜ê¸°
  - 0.28ì„ ì‚¬ìš©í•˜ë¼ê³  í•˜ì—¬ì„œ ë³€ê²½í•´ì£¼ì—ˆìŒ

    ```bash
    pip install openai==0.28
    ```

### TemplateDoesNotExist
- í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë–´ë‹¤.

    ![Image](https://github.com/user-attachments/assets/98789731-d1a3-4de6-b08e-d59b5788140f)

- ğŸ’ªí•´ê²°í•˜ê¸°
  - ì´ëŸ´ ë• ì˜¤íƒ€ë¥¼ ì°¾ëŠ”ê²Œ ìµœê³ ë¼ê³  ê³¼ì œë¥¼ í•˜ë©´ì„œ ê¹¨ë‹¬ì•„ì„œ ì—´ì‹¬íˆ ì˜¤íƒ€ë¥¼ ì°¾ìœ¼ë¡œ ë‹¤ë…€ë³´ë‹ˆ, 
    - views.pyì—ì„œ `chatbot/chabot.html`ë¼ê³  ì ì–´ë†¨ë‹¤ã… ã…  t í•˜ë‚˜ê°€ ë¹ ì ¸ë²„ë¦°..ğŸ¥² ì˜¤íƒ€ ì¡°ì‹¬í•´ì•¼ì§€..

## êµ¬í˜„í™”ë©´
- ì¡°ê¸ˆ ê¾¸ë¦¿í•˜ì§€ë§Œ ê·¸ë˜ë„ êµ¬í˜„ ì™„ë£Œ!
  - HTMLê³¼ CSSê°€ í•´ê²°ë˜ë©´ ê·¸ë˜ë„ ì¡°ê¸ˆ ë‚«ì§€ ì•Šì„ê¹Œ..
  - ì—¬ê¸°ì— ì§ˆë¬¸ì‹œê°„ì„ ì¶”ê°€í•˜ëŠ” ê²ƒë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

    ![Image](https://github.com/user-attachments/assets/9c96a207-392d-4950-b137-710e5f929601)

<br>
<br>

# ğŸ’¡Today I Thought

## ì˜¤ëŠ˜ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x]  ì•Œê³ ë¦¬ì¦˜ ì½”ë“œì¹´íƒ€ 256-260
- [x]  SQL ì½”ë“œì¹´íƒ€ 86-87
- [x]  LLM íŠ¹ê°• ë‚´ìš© ì •ë¦¬í•˜ê¸°
- [x]  LLM ê³¼ì œ
- [ ]  Docker íŠ¹ê°•1 ë“£ê¸°
- [x]  TIL ì‘ì„±

## íšŒê³ 
&nbsp; Docker ê°•ì˜ê¹Œì§€ ì•¼ë¬´ì§€ê²Œ ë“£ëŠ”ê²Œ ì˜¤ëŠ˜ ëª©í‘œì˜€ëŠ”ë°, LLM íŠ¹ê°•ì—ì„œ ê³¼ì œê°€ ë‚˜ì˜¬ê±°ë¼ê³  ëˆ„ê°€ ì•Œì•˜ê² ëƒêµ¬ìš”.. ìƒê°ë³´ë‹¤ ê³¼ì œë¥¼ ì˜¤ë˜ ë¶™ì¡ê³  ìˆì–´ì„œ ì˜¤ëŠ˜ ëª©í‘œëŠ” ë‹¤ ëª»ëëƒˆë‹¤.. ë‚´ì¼ ì‹œê°„ë‚´ì„œ ë“¤ì–´ì•¼ì§€ğŸ˜­

&nbsp; CH4ê°€ ì‹œì‘ë˜ë©´ì„œ ì¡°ê°€ ë°”ë€Œì—ˆë‹¤. ì €ë²ˆ ì¡°ëŠ” ë‹¤ê°™ì´ íŒ€ ë…¸ì…˜ë„ í˜¸ë¡œë¡ ì‘ì„±í•˜ê³ , ê°„ëµí•œ ê²ƒë“¤ì„ ì •í•œ ë’¤ì— í•™ìŠµì„ ì‹œì‘í–ˆë‹¤. ì´ë²ˆ ì£¼ì°¨ì—ëŠ” íŒ€ê³¼ì œê°€ ìˆì–´ì„œ ì¡°ê¸ˆ ë” ë¹¡ì„¸ê²Œ ê³µë¶€í•´ì•¼í• ë“¯ğŸ’ª